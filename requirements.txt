# SMART EVENT TICKET BOOKING SYSTEM - BUILD INSTRUCTIONS
# Three Advanced Features Implementation

## QUICK START

### Compile and Run
Windows:
  gcc -o ticket_system script.js native/eventhub.c -I.
  ticket_system.exe

Linux/Mac:
  gcc -o ticket_system script.js native/eventhub.c -I.
  ./ticket_system

## FEATURES IMPLEMENTED

### Feature 1: 10% Buffer Seat Reservation System
File: native/eventhub.c (lines 736-863)
Functions:
  - eh_initialize_buffer_seats(event_id)
  - eh_book_with_buffer(user_id, event_id, qty)
  - eh_release_buffer_seats(event_id)
  - eh_get_seat_status(event_id)

Data Structures:
  - Seat: Individual seat status tracking
  - EventSeats: Linked list of event seat management
  - Status: AVAILABLE, BOOKED, BUFFER_HIDDEN, BUFFER_RELEASED

Algorithm:
  - Initialize: 10% hidden buffer, 90% available
  - Auto-release: Trigger at 90% booking threshold
  - Time: O(N) booking, O(N) status check

### Feature 2: Adaptive Group Inventory System
File: native/eventhub.c (lines 865-1023)
Functions:
  - eh_book_group_seats(user_id, event_id, group_size)
  - eh_get_available_seat_ranges(event_id)

Data Structures:
  - SegmentNode: Binary tree for range queries
  - GroupBooking: Linked list of group allocations
  - Leaf nodes: Individual seats (count 0 or 1)
  - Internal nodes: Sum of children's available count

Algorithm:
  - Build Segment Tree: O(N log N)
  - Query: O(log N) binary search
  - Allocate: Mark consecutive seats as BOOKED

### Feature 3: PDF Ticket Download
File: native/eventhub.c (lines 1025-1072)
Functions:
  - eh_generate_ticket_pdf(user_id, event_id, booking_id, seats[], count)
  - eh_get_ticket_path(booking_id)

Output:
  - Location: ./tickets/ticket_<booking_id>.txt
  - Format: Formatted text with event and booking details
  - Time: O(1) generation, O(seat_count) I/O

## FILES MODIFIED

### native/eventhub.h
- Added 8 new function signatures
- Lines 42-55: New feature declarations

### native/eventhub.c
- Added ~380 lines of implementation
- Lines 736-1072: All three features
- Lines 1133-1150: Updated shutdown cleanup

### script.js
- Replaced with menu-driven test program (330 lines)
- Demonstrates all three features
- Interactive console application

### .env
- Comprehensive feature documentation
- Algorithm explanations
- Testing scenarios

### package.json
- Complete README with examples
- Performance analysis
- Future enhancements

## MENU OPTIONS

1. Create Event
2. Initialize Buffer Seats (10%)
3. Book Tickets (Buffer System)
4. Book Group Seats (Adaptive)
5. Generate Ticket PDF
6. Release Buffer (Admin)
7. View Seat Status
8. View Available Seat Ranges
9. View Event Details
10. List Events by Category
11. Demo: Full Workflow (AUTO)
12. Exit

## DEMO WORKFLOW (Option 11)

Automatically demonstrates all features:
1. Create 100-seat event
2. Initialize 10% buffer (10 hidden, 90 available)
3. Book 50 tickets (User1)
4. Book 30 tickets (User2)
5. View seat status
6. Book 10 more tickets (User3) - TRIGGERS BUFFER RELEASE
7. View status after buffer release
8. Book 5 consecutive group seats
9. View available ranges
10. Generate ticket PDF
11. Display all results

## TESTING SCENARIOS

### Test 1: Buffer Threshold
- Create 100-seat event
- Initialize buffer
- Book 81 tickets (90% of 90)
- Verify buffer NOT released
- Book 9 more (100% of 90)
- Verify buffer IS released

### Test 2: Group Booking
- Create 50-seat event
- Book scattered individual tickets
- Request 10 consecutive
- Verify allocation
- Check available ranges

### Test 3: PDF Generation
- Complete booking
- Generate ticket
- Verify ./tickets/ directory
- Verify file content

## DATA STRUCTURES USED

- HashMap: Users, Events (O(1) lookup)
- Queue: Booking requests (FIFO)
- Stack: Cancellations (LIFO)
- Linked List: Categories, Groups, Seats
- Segment Tree: Available ranges (O(log N) query)
- Array: Seat status (O(1) access)
- Graph: Venues (Dijkstra shortest path)

## PERFORMANCE SUMMARY

Feature 1 (Buffer):
  - Init: O(N)
  - Book: O(N)
  - Status: O(N)
  - Space: O(N)

Feature 2 (Group):
  - Build: O(N log N)
  - Query: O(log N)
  - Book: O(group_size)
  - Space: O(N)

Feature 3 (PDF):
  - Generate: O(1)
  - I/O: O(seat_count)
  - Space: O(1)

## COMPILATION NOTES

- Requires: GCC or Clang
- Standard: C99 or later
- No external dependencies
- Cross-platform compatible
- Windows path: .\\tickets\\
- Unix path: ./tickets/

## NEXT STEPS

1. Compile: gcc -o ticket_system script.js native/eventhub.c -I.
2. Run: ./ticket_system
3. Select option 11 for automatic demo
4. Check ./tickets/ directory for generated PDFs
5. Explore other menu options for manual testing

## FUTURE ENHANCEMENTS

- Real PDF generation (libharu)
- QR codes on tickets
- Database persistence
- Dynamic buffer percentage
- Email notifications
- Web API endpoints
- Mobile app integration

